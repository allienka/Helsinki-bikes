<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">

        <link href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css" rel="stylesheet">

        <title><%= title %></title>
        <style>
            td {
                
                border-bottom: 1;
            }
            tr{
                background-color: blanchedalmond;
            }
           
            tr.shown{
                background-color: antiquewhite;
            }
      
            
        </style>
        
    </head>
    <body>
        <div class="container">
            <h1 class="text-center text-primary mt-3 mb-3">Station view</h1>

            <div class="card">
                <div class="card-header">Station data</div>
                <div class="card-body">
                    <div class="table-responsive">
                        
                        <table id="station_data" class="table table-bordered">
                            <thead>
                                <tr>
                                    
                                    <th>STATION</th>
                                    
                                </tr>
                            </thead>
                              
                        </table>
                        
                    </div>
                </div>
            </div>
        </div>
       
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
  </body>
</html>

<script>
function format(data) 
    {

              // `data` is the data object for the row
              return '<table cellpadding="5" cellspacing="0"'
                  + ' style="padding-left:50px;">' +
                  '<tr>' +
                  '<td>STATION ADDRESS:</td>' +
                  '<td>' + data.ADDRESS + '</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td>JOURNEYS STARTED FROM HERE:</td>' +
                  '<td>' + data.JOURNEYS_STARTED + '</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td>JOURNEYS ENDED HERE:</td>' +
                  '<td>' + data.JOURNEYS_ENDED + '</td>' +
                  '</tr>'+
                  '<td>AVG DISTANCE(starting):</td>' +
                  '<td>' + data.AVG_STARTING_JOURNEYS_DIST + '</td>' +
                  '</tr>'+
                  '<td>AVG DISTANCE(ending):</td>' +
                  '<td>' + data.AVG_ENDING_JOURNEYS_DIST + '</td>' +
                  '</tr>'+
                  '</table>';
          }



$(document).ready(function(){
//var json = JSON.parse(data);
var dataTable = $('#station_data').DataTable(
    {
    'processing' : true,
    'serverSide' : true,
    'serverMethod' : 'get',
    'ajax' : {
        'url' : '/get_data',
        
    },
    'aaSorting' : [],
    'columns' : [
        { data : 'STATION' }
         
    ]
});
$('#station_data tbody').on('click', 'tr', function () {
        var data = dataTable.row(this).data();
        
       
        var tr = $(this).closest('tr');
        var row = dataTable.row(tr);
        if (row.child.isShown()) {
            
            row.child.hide();
            tr.removeClass('shown');
        }else {
      row.child( format(data)).show();
      tr.addClass('shown');
      }
    });
    
        
    });

</script>